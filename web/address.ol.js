!function(H,J){"object"==typeof exports&&"undefined"!=typeof module?module.exports=J(require("ol/layer/vector"),require("ol/source/vector"),require("ol/geom/point"),require("ol/feature"),require("ol/proj"),require("ol/control/control"),require("ol/style/style"),require("ol/style/icon")):"function"==typeof define&&define.amd?define(["ol/layer/vector","ol/source/vector","ol/geom/point","ol/feature","ol/proj","ol/control/control","ol/style/style","ol/style/icon"],J):H.Geocoder=J(H.ol.layer.Vector,H.ol.source.Vector,H.ol.geom.Point,H.ol.Feature,H.ol.proj,H.ol.control.Control,H.ol.style.Style,H.ol.style.Icon)}(this,function(H,J,K,W,X,Y,Z,$){"use strict";function aa(Ma,Na){if(void 0===Na&&(Na="Assertion failed"),!Ma){if("undefined"!=typeof Error)throw new Error(Na);throw Na}}function ba(Ma){const Na=function(){if(0=="performance"in window&&(window.performance={}),Date.now=Date.now||function(){return new Date().getTime()},0=="now"in window.performance){let Oa=Date.now();performance.timing&&performance.timing.navigationStart&&(Oa=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-Oa}}return window.performance.now()}().toString(36);return Ma?Ma+Na:Na}function ca(Ma){return /^\d+$/.test(Ma)}function da(Ma,Na,Oa){if(Array.isArray(Ma))return void Ma.forEach(function(Ra){return da(Ra,Na)});const Pa=Array.isArray(Na)?Na:Na.split(/\s+/);for(let Qa=Pa.length;Qa--;)fa(Ma,Pa[Qa])||ka(Ma,Pa[Qa],Oa)}function ea(Ma,Na,Oa){if(Array.isArray(Ma))return void Ma.forEach(function(Ra){return ea(Ra,Na,Oa)});const Pa=Array.isArray(Na)?Na:Na.split(/\s+/);for(let Qa=Pa.length;Qa--;)fa(Ma,Pa[Qa])&&la(Ma,Pa[Qa],Oa)}function fa(Ma,Na){return Ma.classList?Ma.classList.contains(Na):ja(Na).test(Ma.className)}function ga(Ma,Na,Oa){void 0===Na&&(Na=window.document);let Pa=/\./g,Qa=Array.prototype.slice,Ra=[];if(/^(#?[\w-]+|\.[\w-.]+)$/.test(Ma))switch(Ma[0]){case"#":Ra=[(Sa=Ma.substr(1),Sa="#"===Sa[0]?Sa.substr(1,Sa.length):Sa,document.getElementById(Sa))];break;case".":Ra=Qa.call(Na.getElementsByClassName(Ma.substr(1).replace(Pa," ")));break;default:Ra=Qa.call(Na.getElementsByTagName(Ma));}else Ra=Qa.call(Na.querySelectorAll(Ma));var Sa;return Oa?Ra:Ra[0]}function ha(Ma,Na){return Ma.replace(/\{ *([\w_-]+) *\}/g,function(Oa,Pa){let Qa=void 0===Na[Pa]?"":Na[Pa];return(Qa+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")})}function ia(Ma,Na){let Oa;if(!Array.isArray(Ma))Oa=document.createElement(Ma);else if(Oa=document.createElement(Ma[0]),Ma[1].id&&(Oa.id=Ma[1].id),Ma[1].classname&&(Oa.className=Ma[1].classname),Ma[1].attr){let Qa=Ma[1].attr;if(Array.isArray(Qa))for(let Ra=-1;++Ra<Qa.length;)Oa.setAttribute(Qa[Ra].name,Qa[Ra].value);else Oa.setAttribute(Qa.name,Qa.value)}Oa.innerHTML=Na;let Pa=document.createDocumentFragment();for(;Oa.childNodes[0];)Pa.appendChild(Oa.childNodes[0]);return Oa.appendChild(Pa),Oa}function ja(Ma){return new RegExp("(^|\\s+) "+Ma+" (\\s+|$)")}function ka(Ma,Na,Oa){Ma.classList?Ma.classList.add(Na):Ma.className=(Ma.className+" "+Na).trim(),Oa&&ca(Oa)&&window.setTimeout(function(){return la(Ma,Na)},Oa)}function la(Ma,Na,Oa){Ma.classList?Ma.classList.remove(Na):Ma.className=Ma.className.replace(ja(Na)," ").trim(),Oa&&ca(Oa)&&window.setTimeout(function(){return ka(Ma,Na)},Oa)}function ma(Ma){return new Promise(function(Na,Oa){const Pa=function(Ra,Sa){return Sa&&"object"==typeof Sa&&(Ra+=(/\?/.test(Ra)?"&":"?")+function Ta(Ua){return Object.keys(Ua).reduce(function(Va,Wa){return Va.push("object"==typeof Ua[Wa]?Ta(Ua[Wa]):encodeURIComponent(Wa)+"="+encodeURIComponent(Ua[Wa])),Va},[]).join("&")}(Sa)),Ra}(Ma.url,Ma.data);Ma.jsonp?function(Ra,Sa,Ta){let Ua=document.head,Va=document.createElement("script"),Wa="f"+Math.round(Math.random()*Date.now());Va.setAttribute("src",Ra+(0<Ra.indexOf("?")?"&":"?")+Sa+"="+Wa),window[Wa]=function(Xa){window[Wa]=void 0,setTimeout(function(){return Ua.removeChild(Va)},0),Ta(Xa)},Ua.appendChild(Va)}(Pa,Ma.callbackName,Na):fetch(Pa,{method:"GET",mode:"cors",credentials:"same-origin"}).then(function(Ra){return Ra.json()}).then(Na).catch(Oa)})}H=H&&H.hasOwnProperty("default")?H.default:H,J=J&&J.hasOwnProperty("default")?J.default:J,K=K&&K.hasOwnProperty("default")?K.default:K,W=W&&W.hasOwnProperty("default")?W.default:W,X=X&&X.hasOwnProperty("default")?X.default:X,Y=Y&&Y.hasOwnProperty("default")?Y.default:Y,Z=Z&&Z.hasOwnProperty("default")?Z.default:Z,$=$&&$.hasOwnProperty("default")?$.default:$;var na={namespace:"ol-geocoder",spin:"gcd-pseudo-rotate",hidden:"gcd-hidden",address:"gcd-address",country:"gcd-country",city:"gcd-city",road:"gcd-road",olControl:"ol-control",glass:{container:"gcd-gl-container",control:"gcd-gl-control",button:"gcd-gl-btn",input:"gcd-gl-input",expanded:"gcd-gl-expanded",reset:"gcd-gl-reset",result:"gcd-gl-result"},inputText:{container:"gcd-txt-container",control:"gcd-txt-control",input:"gcd-txt-input",reset:"gcd-txt-reset",icon:"gcd-txt-glass",result:"gcd-txt-result"}};const pa=Object.freeze({containerId:"gcd-container",buttonControlId:"gcd-button-control",inputQueryId:"gcd-input-query",inputResetId:"gcd-input-reset",cssClasses:na,default:{containerId:"gcd-container",buttonControlId:"gcd-button-control",inputQueryId:"gcd-input-query",inputResetId:"gcd-input-reset",cssClasses:na}}),qa="addresschosen",ra={NOMINATIM:"nominatim",REVERSE:"reverse"},sa="glass-button",va="osm",wa="mapquest",xa="photon",ya="bing",za="opencage",Aa="pelias",Ba={provider:va,placeholder:"Search for an address",featureStyle:null,targetType:sa,lang:"en-US",limit:5,keepOpen:!1,preventDefault:!1,autoComplete:!1,autoCompleteMinLength:2,debug:!1},Ca=pa.cssClasses;var Da=function(Ma){this.options=Ma.options,this.els=this.createControl()};Da.prototype.createControl=function(){let Ma,Na,Oa;return this.options.targetType==="text-input"?(Na=Ca.namespace+" "+Ca.inputText.container,Oa={container:Ma=ia(["div",{id:pa.containerId,classname:Na}],Da.input),control:ga("."+Ca.inputText.control,Ma),input:ga("."+Ca.inputText.input,Ma),reset:ga("."+Ca.inputText.reset,Ma),result:ga("."+Ca.inputText.result,Ma)}):(Na=Ca.namespace+" "+Ca.glass.container,Oa={container:Ma=ia(["div",{id:pa.containerId,classname:Na}],Da.glass),control:ga("."+Ca.glass.control,Ma),button:ga("."+Ca.glass.button,Ma),input:ga("."+Ca.glass.input,Ma),reset:ga("."+Ca.glass.reset,Ma),result:ga("."+Ca.glass.result,Ma)}),Oa.input.placeholder=this.options.placeholder,Oa},Da.glass=["<div class=\"",Ca.glass.control," ",Ca.olControl,"\">","<button type=\"button\""," id=\"",pa.buttonControlId,"\""," class=\"",Ca.glass.button,"\"></button>","<input type=\"text\""," id=\"",pa.inputQueryId,"\""," class=\"",Ca.glass.input,"\""," autocomplete=\"off\" placeholder=\"Search ...\">","<a"," id=\"",pa.inputResetId,"\""," class=\"",Ca.glass.reset," ",Ca.hidden,"\"","></a>","</div>","<ul class=\"",Ca.glass.result,"\"></ul>"].join(""),Da.input=["<div class=\"",Ca.inputText.control,"\">","<input type=\"text\""," id=\"",pa.inputQueryId,"\""," class=\"",Ca.inputText.input,"\""," autocomplete=\"off\" placeholder=\"Search ...\">","<span class=\"",Ca.inputText.icon,"\"></span>","<button type=\"button\""," id=\"",pa.inputResetId,"\""," class=\"",Ca.inputText.reset," ",Ca.hidden,"\"","></button>","</div>","<ul class=\"",Ca.inputText.result,"\"></ul>"].join("");var Ea=function(){this.settings={url:"https://photon.komoot.de/api/",params:{q:"",limit:10,lang:"en"},langs:["de","it","fr","en"]}};Ea.prototype.getParameters=function(Ma){return Ma.lang=Ma.lang.toLowerCase(),{url:this.settings.url,params:{q:Ma.query,limit:Ma.limit||this.settings.params.limit,lang:-1<this.settings.langs.indexOf(Ma.lang)?Ma.lang:this.settings.params.lang}}},Ea.prototype.handleResponse=function(Ma){return Ma.map(function(Na){return{lon:Na.geometry.coordinates[0],lat:Na.geometry.coordinates[1],address:{name:Na.properties.name,postcode:Na.properties.postcode,city:Na.properties.city,state:Na.properties.state,country:Na.properties.country},original:{formatted:Na.properties.name,details:Na.properties}}})};var Fa=function(){this.settings={url:"http://cloud-lxx.mcpl.ga:8054/search",params:{q:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}};Fa.prototype.getParameters=function(Ma){return{url:this.settings.url,params:{q:Ma.query,format:this.settings.params.format,addressdetails:this.settings.params.addressdetails,limit:Ma.limit||this.settings.params.limit,countrycodes:Ma.countrycodes||this.settings.params.countrycodes,"accept-language":Ma.lang||this.settings.params["accept-language"]}}},Fa.prototype.handleResponse=function(Ma){return Ma.map(function(Na){return{lon:Na.lon,lat:Na.lat,address:{name:Na.display_name,road:Na.address.road||"",houseNumber:Na.address.house_number||"",postcode:Na.address.postcode,city:Na.address.city||Na.address.town,state:Na.address.state,country:Na.address.country},original:{formatted:Na.display_name,details:Na.address}}})};var Ga=function(){this.settings={url:"http://open.mapquestapi.com/nominatim/v1/search.php",params:{q:"",key:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}};Ga.prototype.getParameters=function(Ma){return{url:this.settings.url,params:{q:Ma.query,key:Ma.key,format:"json",addressdetails:1,limit:Ma.limit||this.settings.params.limit,countrycodes:Ma.countrycodes||this.settings.params.countrycodes,"accept-language":Ma.lang||this.settings.params["accept-language"]}}},Ga.prototype.handleResponse=function(Ma){return Ma.map(function(Na){return{lon:Na.lon,lat:Na.lat,address:{name:Na.address.neighbourhood||"",road:Na.address.road||"",postcode:Na.address.postcode,city:Na.address.city||Na.address.town,state:Na.address.state,country:Na.address.country},original:{formatted:Na.display_name,details:Na.address}}})};var Ha=function(){this.settings={url:"http://search.mapzen.com/v1/search",params:{size:10}}};Ha.prototype.getParameters=function(Ma){return{url:this.settings.url,params:{text:Ma.query,api_key:Ma.key,size:Ma.limit||this.settings.params.size}}},Ha.prototype.handleResponse=function(Ma){return Ma.map(function(Na){return{lon:Na.geometry.coordinates[0],lat:Na.geometry.coordinates[1],address:{name:Na.properties.name,house_number:Na.properties.housenumber,postcode:Na.properties.postalcode,road:Na.properties.street,city:Na.properties.city,state:Na.properties.region,country:Na.properties.country},original:{formatted:Na.properties.label,details:Na.properties}}})};var Ia=function(){this.settings={url:"https://dev.virtualearth.net/REST/v1/Locations",callbackName:"jsonp",params:{query:"",key:"",includeNeighborhood:0,maxResults:10}}};Ia.prototype.getParameters=function(Ma){return{url:this.settings.url,callbackName:this.settings.callbackName,params:{query:Ma.query,key:Ma.key,includeNeighborhood:Ma.includeNeighborhood||this.settings.params.includeNeighborhood,maxResults:Ma.maxResults||this.settings.params.maxResults}}},Ia.prototype.handleResponse=function(Ma){return Ma.map(function(Na){return{lon:Na.point.coordinates[1],lat:Na.point.coordinates[0],address:{name:Na.name},original:{formatted:Na.address.formattedAddress,details:Na.address}}})};var Ja=function(){this.settings={url:"https://api.opencagedata.com/geocode/v1/json?",params:{q:"",key:"",limit:10,countrycode:"",pretty:1,no_annotations:1}}};Ja.prototype.getParameters=function(Ma){return{url:this.settings.url,params:{q:Ma.query,key:Ma.key,limit:Ma.limit||this.settings.params.limit,countrycode:Ma.countrycodes||this.settings.params.countrycodes}}},Ja.prototype.handleResponse=function(Ma){return Ma.map(function(Na){return{lon:Na.geometry.lng,lat:Na.geometry.lat,address:{name:Na.components.house_number||"",road:Na.components.road||"",postcode:Na.components.postcode,city:Na.components.city||Na.components.town,state:Na.components.state,country:Na.components.country},original:{formatted:Na.formatted,details:Na.components}}})};const Ka=pa.cssClasses;var La=function(Ma,Na){this.Base=Ma,this.layerName=ba("geocoder-layer-"),this.layer=new H({name:this.layerName,source:new J}),this.options=Ma.options,this.options.provider="string"==typeof this.options.provider?this.options.provider.toLowerCase():this.options.provider,this.els=Na,this.lastQuery="",this.container=this.els.container,this.registeredListeners={mapClick:!1},this.setListeners(),this.Photon=new Ea,this.OpenStreet=new Fa,this.MapQuest=new Ga,this.Pelias=new Ha,this.Bing=new Ia,this.OpenCage=new Ja};return La.prototype.setListeners=function(){var Ma=this;let Na,Oa;this.els.input.addEventListener("keypress",function(Qa){const Ra=Qa.target.value.trim();(Qa.key?"Enter"===Qa.key:Qa.which?13===Qa.which:Qa.keyCode&&13===Qa.keyCode)&&(Qa.preventDefault(),Ma.query(Ra))},!1),this.els.input.addEventListener("input",function(Qa){const Ra=Qa.target.value.trim();Ra.length?ea(Ma.els.reset,Ka.hidden):da(Ma.els.reset,Ka.hidden),Ma.options.autoComplete&&Ra!==Oa&&(Oa=Ra,Na&&clearTimeout(Na),Na=setTimeout(function(){Ra.length>=Ma.options.autoCompleteMinLength&&Ma.query(Ra)},200))},!1),this.els.reset.addEventListener("click",function(){Ma.els.input.focus(),Ma.els.input.value="",Ma.lastQuery="",da(Ma.els.reset,Ka.hidden),Ma.clearResults()},!1),this.options.targetType===sa&&this.els.button.addEventListener("click",function(){fa(Ma.els.control,Ka.glass.expanded)?Ma.collapse():Ma.expand()},!1)},La.prototype.query=function(Ma){var Na=this;const Oa=this.getProvider({query:Ma,provider:this.options.provider,key:this.options.key,lang:this.options.lang,countrycodes:this.options.countrycodes,limit:this.options.limit});if(!(this.lastQuery===Ma&&this.els.result.firstChild)){this.lastQuery=Ma,this.clearResults(),da(this.els.reset,Ka.spin);let Pa={url:Oa.url,data:Oa.params};Oa.callbackName&&(Pa.jsonp=!0,Pa.callbackName=Oa.callbackName),ma(Pa).then(function(Qa){let Ra;switch(Na.options.debug&&console.info(Qa),ea(Na.els.reset,Ka.spin),Na.options.provider){case va:Ra=Qa.length?Na.OpenStreet.handleResponse(Qa):void 0;break;case wa:Ra=Qa.length?Na.MapQuest.handleResponse(Qa):void 0;break;case Aa:Ra=Qa.features.length?Na.Pelias.handleResponse(Qa.features):void 0;break;case xa:Ra=Qa.features.length?Na.Photon.handleResponse(Qa.features):void 0;break;case ya:Ra=Qa.resourceSets[0].resources.length?Na.Bing.handleResponse(Qa.resourceSets[0].resources):void 0;break;case za:Ra=Qa.results.length?Na.OpenCage.handleResponse(Qa.results):void 0;break;default:Ra=Na.options.provider.handleResponse(Qa);}Ra&&(Na.createList(Ra),Na.listenMapClick())}).catch(function(){ea(Na.els.reset,Ka.spin);const Ra=ia("li","<h5>Error! No internet connection?</h5>");Na.els.result.appendChild(Ra)})}},La.prototype.createList=function(Ma){var Na=this;const Oa=this.els.result;Ma.forEach(function(Pa){let Qa;switch(Na.options.provider){case va:Qa="<span class=\""+Ka.road+"\">"+Pa.address.name+"</span>";break;default:Qa=Na.addressTemplate(Pa.address);}const Ra=ia("li","<a href=\"#\">"+Qa+"</a>");Ra.addEventListener("click",function(Sa){Sa.preventDefault(),Na.chosen(Pa,Qa,Pa.address,Pa.original)},!1),Oa.appendChild(Ra)})},La.prototype.chosen=function(Ma,Na,Oa,Pa){const Qa=this.Base.getMap(),Ra=[parseFloat(Ma.lon),parseFloat(Ma.lat)],Sa=Qa.getView().getProjection(),Ta=X.transform(Ra,"EPSG:4326",Sa);let Ua=Ma.bbox;Ua&&(Ua=X.transformExtent(Ua,"EPSG:4326",Sa));const Va={formatted:Na,details:Oa,original:Pa};if(!1===this.options.keepOpen&&this.clearResults(!0),!0===this.options.preventDefault)this.Base.dispatchEvent({type:qa,address:Va,coordinate:Ta,bbox:Ua});else{Ua?Qa.getView().fit(Ua,{duration:500}):function(Xa,Ya,Za,$a){$a=$a||2.388657133911758,Za=Za||500,Xa.getView().animate({duration:Za,resolution:$a},{duration:Za,center:Ya})}(Qa,Ta);const Wa=this.createFeature(Ta,Va);this.Base.dispatchEvent({type:qa,address:Va,feature:Wa,coordinate:Ta,bbox:Ua})}},La.prototype.createFeature=function(Ma){const Na=new W(new K(Ma));return this.addLayer(),Na.setStyle(this.options.featureStyle),Na.setId(ba("geocoder-ft-")),this.getSource().addFeature(Na),Na},La.prototype.addressTemplate=function(Ma){let Na=[];return Ma.name&&Na.push(["<span class=\"",Ka.road,"\">{name}</span>"].join("")),(Ma.road||Ma.building||Ma.house_number)&&Na.push(["<span class=\"",Ka.road,"\">{building} {road} {house_number}</span>"].join("")),(Ma.city||Ma.town||Ma.village)&&Na.push(["<span class=\"",Ka.city,"\">{postcode} {city} {town} {village}</span>"].join("")),(Ma.state||Ma.country)&&Na.push(["<span class=\"",Ka.country,"\">{state} {country}</span>"].join("")),ha(Na.join("<br>"),Ma)},La.prototype.getProvider=function(Ma){let Na;switch(Ma.provider){case va:Na=this.OpenStreet.getParameters(Ma);break;case wa:Na=this.MapQuest.getParameters(Ma);break;case xa:Na=this.Photon.getParameters(Ma);break;case Aa:Na=this.Pelias.getParameters(Ma);break;case ya:Na=this.Bing.getParameters(Ma);break;case za:Na=this.OpenCage.getParameters(Ma);break;default:Na=Ma.provider.getParameters(Ma);}return Na},La.prototype.expand=function(){var Ma=this;ea(this.els.input,Ka.spin),da(this.els.control,Ka.glass.expanded),window.setTimeout(function(){return Ma.els.input.focus()},100),this.listenMapClick()},La.prototype.collapse=function(){this.els.input.value="",this.els.input.blur(),da(this.els.reset,Ka.hidden),ea(this.els.control,Ka.glass.expanded),this.clearResults()},La.prototype.listenMapClick=function(){if(!this.registeredListeners.mapClick){const Ma=this,Na=this.Base.getMap().getTargetElement();this.registeredListeners.mapClick=!0,Na.addEventListener("click",{handleEvent:function(Oa){Ma.clearResults(!0),Na.removeEventListener(Oa.type,this,!1),Ma.registeredListeners.mapClick=!1}},!1)}},La.prototype.clearResults=function(Ma){Ma&&this.options.targetType===sa?this.collapse():function(Na){for(;Na.firstChild;)Na.removeChild(Na.firstChild)}(this.els.result)},La.prototype.getSource=function(){return this.layer.getSource()},La.prototype.addLayer=function(){var Ma=this;let Na=!1;const Oa=this.Base.getMap();Oa.getLayers().forEach(function(Pa){Pa===Ma.layer&&(Na=!0)}),Na||Oa.addLayer(this.layer)},function(Ma){function Na(Oa,Pa){if(void 0===Oa&&(Oa=ra.NOMINATIM),void 0===Pa&&(Pa={}),!(this instanceof Na))return new Na;let Qa;aa("string"==typeof Oa,"@param `type` should be string!"),aa(Oa===ra.NOMINATIM||Oa===ra.REVERSE,"@param 'type' should be '"+ra.NOMINATIM+"'\n        or '"+ra.REVERSE+"'!"),aa("object"==typeof Pa,"@param `options` should be object!"),Ba.featureStyle=[new Z({image:new $({scale:.7,src:"//cdn.rawgit.com/jonataswalker/map-utils/master/images/marker.png"})})],this.options=function(Sa,Ta){let Ua={};for(let Va in Sa)Ua[Va]=Sa[Va];for(let Va in Ta)Ua[Va]=Ta[Va];return Ua}(Ba,Pa),this.container=void 0;const Ra=new Da(this);Oa===ra.NOMINATIM?(this.container=Ra.els.container,Qa=new La(this,Ra.els),this.layer=Qa.layer):ra.REVERSE,Ma.call(this,{element:this.container})}return Ma&&(Na.__proto__=Ma),Na.prototype=Object.create(Ma&&Ma.prototype),Na.prototype.constructor=Na,Na.prototype.getLayer=function(){return this.layer},Na.prototype.getSource=function(){return this.getLayer().getSource()},Na.prototype.setProvider=function(Oa){this.options.provider=Oa},Na.prototype.setProviderKey=function(Oa){this.options.key=Oa},Na}(Y)}),function(H,J){"object"==typeof exports&&"undefined"!=typeof module?module.exports=J(require("ol/overlay")):"function"==typeof define&&define.amd?define(["ol/overlay"],J):H.Popup=J(H.ol.Overlay)}(this,function(H){"use strict";H="default"in H?H["default"]:H;var J=function(Z,$){if(!(Z instanceof $))throw new TypeError("Cannot call a class as a function")},K=function(){function Z($,aa){for(var ca,ba=0;ba<aa.length;ba++)ca=aa[ba],ca.enumerable=ca.enumerable||!1,ca.configurable=!0,"value"in ca&&(ca.writable=!0),Object.defineProperty($,ca.key,ca)}return function($,aa,ba){return aa&&Z($.prototype,aa),ba&&Z($,ba),$}}(),W=function(Z,$){if("function"!=typeof $&&null!==$)throw new TypeError("Super expression must either be null or a function, not "+typeof $);Z.prototype=Object.create($&&$.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,$):Z.__proto__=$)},X=function(Z,$){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&("object"==typeof $||"function"==typeof $)?$:Z},Y=function(Z){function $(aa){J(this,$);var ba=aa||{};void 0===ba.autoPan&&(ba.autoPan=!0),void 0===ba.autoPanAnimation&&(ba.autoPanAnimation={duration:250});var ca=document.createElement("div");ba.element=ca;var da=X(this,($.__proto__||Object.getPrototypeOf($)).call(this,ba));da.container=ca,da.container.className="ol-popup",da.closer=document.createElement("a"),da.closer.className="ol-popup-closer",da.closer.href="#",da.container.appendChild(da.closer);var ea=da;return da.closer.addEventListener("click",function(fa){ea.container.style.display="none",ea.closer.blur(),fa.preventDefault()},!1),da.content=document.createElement("div"),da.content.className="ol-popup-content",da.container.appendChild(da.content),$.enableTouchScroll_(da.content),da}return W($,Z),K($,[{key:"show",value:function(ba,ca){return ca instanceof HTMLElement?(this.content.innerHTML="",this.content.appendChild(ca)):this.content.innerHTML=ca,this.container.style.display="block",this.content.scrollTop=0,this.setPosition(ba),this}},{key:"hide",value:function(){return this.container.style.display="none",this}},{key:"isOpened",value:function(){return"block"==this.container.style.display}}],[{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(ba){return!1}}},{key:"enableTouchScroll_",value:function(ba){if($.isTouchDevice_()){var ca=0;ba.addEventListener("touchstart",function(da){ca=this.scrollTop+da.touches[0].pageY},!1),ba.addEventListener("touchmove",function(da){this.scrollTop=ca-da.touches[0].pageY},!1)}}}]),$}(H);return window.ol&&window.ol.Overlay&&(window.ol.Overlay.Popup=Y),Y});